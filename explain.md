عظيم، لنبدأ الآن بتنظيم هيكل المجلدات الخاص بمكتبتك وتطوير الأداة، وبعد ذلك سننتقل إلى إنشاء مشروع Django لاختبار الأداة أثناء التطوير. سنتبع هيكل المجلدات القياسي لتوزيع مكتبة Python عبر **PyPI** بما يتوافق مع المعايير المعتمدة، وسنقوم بتطبيق أفضل الممارسات في تنظيم الكود.

### 1. **تنظيم مجلدات المكتبة (Library Directory Structure)**

فيما يلي هيكل المجلدات المعتاد لمكتبة Python تُوزع عبر **PyPI**. هذا الهيكل يضمن أن المكتبة ستكون قابلة للإعادة الاستخدام وسهلة النشر عبر **pip**.

#### 1.1 **الهيكل الأساسي للمكتبة**:

```
django-dynamic-forms/
├── django_dynamic_forms/       # الكود الخاص بالمكتبة
│   ├── __init__.py             # ملف لتحديد أن هذا المجلد هو حزمة Python
│   ├── generate_form.py        # الكود الرئيسي لتوليد النموذج
│   ├── forms.py                # نموذج Django المُولد (ModelForm)
│   ├── templates/              # المجلد الخاص بالقوالب إذا أردت توليد HTML
│   │   └── dynamic_form.html   # القالب الافتراضي لعرض النماذج
│   └── tests/                  # مجلد لاختبارات الوحدة الخاصة بالأداة
│       └── test_generate_form.py
│   └── management/
│       └── commands/
│           └── generate_dynamic_form.py
├── docs/                       # مستندات المكتبة (اختياري)
│   └── index.rst               # ملف الوثائق الأساسي
├── examples/                   # أمثلة لاستخدام المكتبة
│   └── example_usage.py        # مثال لتطبيق الأداة
├── setup.py                    # ملف إعداد المكتبة لـ PyPI
├── README.md                   # ملف قراءة عن المكتبة
├── LICENSE                     # الترخيص
└── MANIFEST.in                 # تحديد الملفات التي يجب تضمينها في الحزمة عند النشر
```

#### 1.2 **شرح مكونات المجلدات:**

- **`django_dynamic_forms/`**: هذا المجلد يحتوي على الكود الفعلي للمكتبة.
  - **`generate_form.py`**: يحتوي على المنطق الخاص بإنشاء النموذج (ModelForm) عبر الأوامر.
  - **`forms.py`**: الملف الذي يتضمن وظائف **ModelForm** وتوليد النماذج ديناميكيًا.
  - **`templates/`**: مجلد القوالب لتخزين القوالب إذا كنت ستقوم بتوليد **HTML**.
  - **`tests/`**: مجلد الاختبارات لتغطية اختبار الأداة. يتضمن اختبارات وحدة للتأكد من أن الأداة تعمل بشكل صحيح.
- **`docs/`**: إذا كنت تنوي توفير **وثائق للمكتبة** (اختياري لكن موصى به)، يتم وضعها هنا.
- **`examples/`**: مجلد يحتوي على أمثلة لتطبيق المكتبة وكيفية استخدامها. هذا يمكن أن يكون **مفيدًا للمطورين** لفهم كيفية استخدام الأداة في مشاريعهم.
- **`setup.py`**: الملف الأساسي لتثبيت المكتبة عبر **PyPI**. يحتوي على معلومات مثل اسم المكتبة، إصدارها، وتبعياتها.
- **`README.md`**: يحتوي على مستندات أساسية لشرح ما تفعله المكتبة وكيفية تثبيتها واستخدامها.

- **`LICENSE`**: ملف الترخيص الذي يوضح شروط استخدام المكتبة.

- **`MANIFEST.in`**: يتم تحديد الملفات التي يجب تضمينها عند نشر المكتبة على **PyPI**. هذا يشمل قوالب HTML أو ملفات اختبار أو مستندات.

### 2. **إنشاء مشروع Django لاختبار الأداة أثناء التطوير**

#### 2.1 **إنشاء بيئة افتراضية**

أولاً، ننشئ **بيئة افتراضية** لتطوير المكتبة، مما يساعد على تجنب تعارضات بين المكتبات:

```bash
# إنشاء بيئة افتراضية
python3 -m venv venv

# تفعيل البيئة الافتراضية
# على نظام Unix/Mac:
source venv/bin/activate
# على نظام Windows:
venv\Scripts\activate
```

#### 2.2 **تثبيت Django في البيئة الافتراضية**

بعد تفعيل البيئة الافتراضية، قم بتثبيت **Django** و **pytest** لاختبار المكتبة:

```bash
# تثبيت Django
pip install django

# تثبيت pytest لاختبار المكتبة
pip install pytest
```

#### 2.3 **إنشاء مشروع Django جديد**

الآن، لنقم بإنشاء **مشروع Django جديد** لاختبار الأداة أثناء تطويرها:

```bash
# إنشاء مشروع Django جديد
django-admin startproject mytestproject

# الانتقال إلى مجلد المشروع
cd mytestproject
```

#### 2.4 **إعداد تطبيق Django لاختبار الأداة**

من الأفضل أن تنشئ **تطبيقًا** منفصلًا داخل مشروع Django لاختبار المكتبة بشكل معزول:

```bash
# إنشاء تطبيق Django جديد لاختبار الأداة
python manage.py startapp dynamic_form_test
```

#### 2.5 **تثبيت مكتبة `django-dynamic-forms` في مشروع Django**

لتثبيت مكتبتك وتضمينها في المشروع:

1. **أضف المكتبة إلى مجلد مشروع Django** باستخدام الرابط المحلي للمكتبة أو من PyPI (بمجرد نشرها).

   **إذا كنت تستخدم PyPI**:

   ```bash
   pip install django-dynamic-forms
   ```

   **إذا كنت تقوم بتطوير المكتبة محليًا (من المجلد المحلي)**:

   ```bash
   pip install -e F:\projects2025\django-dynamic-forms
   ```

   ستتمكن من الآن من استيراد مكتبتك واستخدامها داخل تطبيق Django الخاص بك.

#### 2.6 **إعداد تطبيق اختبار الأداة**

بمجرد تثبيت المكتبة في مشروع Django، ستحتاج إلى تعديل **`settings.py`** داخل مشروع Django لإضافة التطبيق الذي أنشأته:

```python
INSTALLED_APPS = [
    ...
    'dynamic_form_test',
    'django_dynamic_forms',  # أضف المكتبة هنا
]
```

#### 2.7 **إجراء اختبار الأداة**

- **اكتب اختبارات الوحدة** الخاصة بالأداة في مجلد `dynamic_form_test` باستخدام **`pytest`** أو **`unittest`**.
- **استخدم الأوامر** من سطر الأوامر مثل:
  ```bash
  python manage.py generate_dynamic_form --model=Product -vt
  ```
  لتوليد النماذج و**التحقق من الصحة** و **التنسيق باستخدام Tailwind CSS** أثناء اختبار الأداة في بيئة Django.

#### 2.8 **تشغيل الخادم لاختبار الواجهة HTML**

إذا كانت الأداة تولد صفحات **HTML**، يمكنك تشغيل الخادم المحلي لمراجعة الواجهة:

```bash
python manage.py runserver
```

ثم افتح **المتصفح** وتوجه إلى **الصفحة التي تحتوي على النموذج** الذي تم توليده لمراجعة النتيجة.

---

### 3. **الخطوة التالية**

بعد أن تقوم بإعداد الهيكل الأساسي للمكتبة وإنشاء بيئة الاختبار الخاصة بك، يمكنك الانتقال إلى **كتابة الكود الفعلي** لإنشاء النماذج الديناميكية عبر الأوامر، بالإضافة إلى اختبار الأداة باستخدام **Django**.

إذا كنت مستعدًا، يمكننا البدء في **كتابة الكود** لإنشاء الأداة بناءً على الهيكل الذي وضعناه الآن. ما رأيك؟
